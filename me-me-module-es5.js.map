{"version":3,"sources":["./src/app/components/landing-page/me/me.component.html","./src/app/components/landing-page/me/me-routing.module.ts","./src/app/components/landing-page/me/me.component.sass","./src/app/components/landing-page/me/me.component.ts","./src/app/components/landing-page/me/me.module.ts","./src/app/services/image-handler.service.ts","./src/app/services/users.service.ts"],"names":[],"mappings":"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","file":"me-me-module-es5.js","sourcesContent":["module.exports = \"<div class=\\\"row\\\">\\r\\n  <div class=\\\"col-2\\\">\\r\\n    <a class=\\\"w-75 btn btn-block btn-outline-light btn-sm\\\" [routerLink]=\\\"['/']\\\">\\r\\n      <i class=\\\"fas fa-chevron-left\\\"></i> Regresar\\r\\n    </a>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"user && form\\\">\\r\\n\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-12\\\">\\r\\n      <h4 class=\\\"text-center text-light\\\">Mi información</h4>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <form [formGroup]=\\\"form\\\" (submit)=\\\"save()\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-sm-3\\\">\\r\\n        <h5 class=\\\"text-center text-muted\\\">Vista previa de tarjeta</h5>\\r\\n        <div class=\\\"text-center text-light border-card rounded p-2\\\"\\r\\n          [ngClass]=\\\"{'isActive': form.value.status == 'active', 'isInactive': form.value.status == 'inactive'}\\\">\\r\\n          <img [src]=\\\"imgRender || user.photo\\\"\\r\\n            [alt]=\\\"form.value.name + ' ' + form.value.lastname\\\" class=\\\"img-fluid rounded mb-2 portrait\\\">\\r\\n          <h6>{{ form.value.name }} {{ form.value.lastname }}<br>\\r\\n            <small class=\\\"text-muted\\\">{{ user.role.name }} de {{ user.area.name }}</small>\\r\\n          </h6>\\r\\n          <label class=\\\"text-primary fs09\\\">{{ form.value.username || user.user_name }}</label><br>\\r\\n\\r\\n          <a [href]=\\\"'mailto:' + user.email\\\" class=\\\"text-decoration-none text-light fs08\\\">\\r\\n            <i class=\\\"fas fa-envelope\\\"></i>\\r\\n            {{ user.email }}</a><br>\\r\\n          <a [href]=\\\"'tel:' + user.phone\\\" class=\\\"text-decoration-none text-light fs08\\\">\\r\\n            <i class=\\\"fas fa-mobile-alt\\\"></i>\\r\\n            {{ user.phone }}</a>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-sm-9\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-sm-4\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"text-muted\\\">Nombre</label>\\r\\n              <input type=\\\"text\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"name\\\"\\r\\n                placeholder=\\\"Nombre(s) del empleado\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-sm-4\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"text-muted\\\">Apellidos</label>\\r\\n              <input type=\\\"text\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"lastname\\\"\\r\\n                placeholder=\\\"Apellidos(s) del empleado\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-sm-4\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"text-muted\\\">Orientación</label>\\r\\n              <select class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"gender\\\">\\r\\n                <option [ngValue]=\\\"1\\\">Hombre</option>\\r\\n                <option [ngValue]=\\\"2\\\">Mujer</option>\\r\\n                <option [ngValue]=\\\"3\\\">Prefiero reservarlo</option>\\r\\n              </select>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"row mt-2\\\">\\r\\n          <div class=\\\"col-sm-4\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"text-muted\\\">Correo electrónico</label>\\r\\n              <input type=\\\"email\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"email\\\"\\r\\n                placeholder=\\\"Correo electrónico\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-sm-4\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"text-muted\\\">Usuario</label>\\r\\n              <input type=\\\"text\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"username\\\"\\r\\n                placeholder=\\\"Nombre de usuario\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-sm-4\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"text-muted\\\">Teléfono de contacto</label>\\r\\n              <input type=\\\"tel\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"phone\\\"\\r\\n                placeholder=\\\"Teléfono (Incluye LADA)\\\" pattern=\\\"[0-9]{10}\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"row mt-2\\\">\\r\\n          <div class=\\\"col-sm-4\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"text-muted\\\">Rol</label>\\r\\n              <input type=\\\"text\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"role\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-sm-4\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"text-muted\\\">Departamento</label>\\r\\n              <input type=\\\"text\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"area\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-sm-4\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"text-muted\\\">Jefe inmediato</label>\\r\\n              <input type=\\\"text\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"boss\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"row mt-2\\\">\\r\\n          <div class=\\\"col-sm-6\\\">\\r\\n            <label class=\\\"text-muted\\\">Foto</label>\\r\\n            <input #i type=\\\"file\\\" formControlName=\\\"file\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\"\\r\\n              (change)=\\\"renderImage( i.files[0] )\\\">\\r\\n          </div>\\r\\n          <div class=\\\"col-sm-6\\\">\\r\\n            <label class=\\\"text-muted\\\">Cambiar password</label>\\r\\n            <input type=\\\"password\\\" class=\\\"form-control form-control-sm bg-dark text-light\\\" formControlName=\\\"password\\\"\\r\\n              placeholder=\\\"Nueva contraseña\\\">\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"row mt-3\\\">\\r\\n          <div class=\\\"col-10\\\">\\r\\n            <div id=\\\"accordion\\\">\\r\\n              <div class=\\\"card bg-dark\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                  <a class=\\\"card-link text-center text-light\\\" data-toggle=\\\"collapse\\\" href=\\\"#collapseOne\\\">\\r\\n                    Ver el historial de cambios\\r\\n                  </a>\\r\\n                </div>\\r\\n                <div id=\\\"collapseOne\\\" class=\\\"collapse\\\" data-parent=\\\"#accordion\\\">\\r\\n                  <div class=\\\"card-body\\\">\\r\\n                    <ul *ngIf=\\\"user.modification.length > 0\\\" class=\\\"list-group\\\">\\r\\n                      <li class=\\\"list-group-item fs07 bg-dark text-light\\\"\\r\\n                        *ngFor=\\\"let mod of pagComments[ indexComments ]\\\">\\r\\n                        El\\r\\n                        <span class=\\\"text-primary\\\">{{ mod.date | date:'medium' }} - {{ mod.user.name }}\\r\\n                          {{ mod.user.last_name }}</span>\\r\\n                        modificó:\\r\\n                        <ul *ngFor=\\\"let up of mod.updated\\\" class=\\\"list-unstyled\\\">\\r\\n                          <li class=\\\"ml-2\\\">\\r\\n                            {{ up.field }} de <span class=\\\"font-weight-bolder fs08\\\">{{ up.from }}</span> por <span\\r\\n                              class=\\\"font-weight-bolder fs08\\\">{{ up.to }}</span>.\\r\\n                          </li>\\r\\n                        </ul>\\r\\n                      </li>\\r\\n                    </ul>\\r\\n                    <div *ngIf=\\\"user.modification.length > 0\\\">\\r\\n                      <a class=\\\"pointer btn btn-sm btn-outline-light text-light my-2 mx-1\\\" \\r\\n                      (click)=\\\"lessComments()\\\">\\r\\n                        <i class=\\\"fas fa-chevron-left\\\"></i>\\r\\n                      </a>\\r\\n                      <a class=\\\"pointer btn btn-sm btn-outline-light text-light my-2 mx-1\\\" \\r\\n                      (click)=\\\"plusComments()\\\">\\r\\n                        <i class=\\\"fas fa-chevron-right\\\"></i>\\r\\n                      </a>\\r\\n                    </div>\\r\\n                    <label *ngIf=\\\"user.modification.length === 0\\\" class=\\\"text-center text-light\\\">Aún no hay\\r\\n                      modificaciones</label>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"row mt-5\\\">\\r\\n          <div class=\\\"col-sm-6 offset-sm-3\\\">\\r\\n            <button type=\\\"submit\\\" class=\\\"btn btn-sm btn-block btn-outline-light\\\">Guardar</button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MeComponent } from './me.component';\n\n\nconst routes: Routes = [\n  { path: '', component: MeComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class MeRoutingModule { }\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbGFuZGluZy1wYWdlL21lL21lLmNvbXBvbmVudC5zYXNzIn0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { ImageHandlerService } from '../../../services/image-handler.service';\r\nimport { LocalStorageService } from '../../../services/local-storage.service';\r\nimport { UsersService } from '../../../services/users.service';\r\nimport { Router } from '@angular/router';\r\nimport { Employee } from '../employees/employees.interface';\r\nimport { link } from '../../../variables/services.config';\r\n\r\n@Component({\r\n  selector: 'app-me',\r\n  templateUrl: './me.component.html',\r\n  styleUrls: ['./me.component.sass']\r\n})\r\nexport class MeComponent implements OnInit {\r\n  public form: FormGroup;\r\n  public imgRender: string;\r\n  public file: any;\r\n  public user: any;\r\n  public current: number;\r\n  public pagComments: Array<any> = [];\r\n  public indexComments: number;\r\n\r\n  constructor(\r\n    private tostador: ToastrService,\r\n    private cIHandler: ImageHandlerService,\r\n    private cLs: LocalStorageService,\r\n    private cUserService: UsersService,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    const name = this.cLs.getIndex('normalizedToLink');\r\n    this.indexComments = 0;\r\n    if ( name ) {\r\n\r\n      this.cUserService.fetch( 0, 1, name )\r\n      .subscribe(\r\n        ( res: any ) => {\r\n          this.user = res.data[0];\r\n          this.user.photo = `${ link }/users/${ this.user.photo }`;\r\n          this.user.modification = this.user.modification.reverse();\r\n          let x = 0;\r\n          for ( let i = 0; i < this.user.modification.length; i += 3 ) {\r\n            this.pagComments[ x ] = this.user.modification.slice( i, (3 + i ) );\r\n            x++;\r\n          }\r\n        },\r\n        ( err: any ) => this.tostador.error( err.error, '¡Error!' )\r\n      ).add( () =>  this.createForm() );\r\n    }\r\n\r\n  }\r\n\r\n  createForm() {\r\n    const boss = this.user.boss.name + ' ' + this.user.boss.last_name;\r\n    this.form = new FormGroup({\r\n      name:     new FormControl( this.user.name,      [ Validators.required ]),\r\n      lastname: new FormControl( this.user.last_name, [ Validators.required ]),\r\n      gender:   new FormControl( this.user.gender,    [ Validators.required ]),\r\n      email:    new FormControl( this.user.email),\r\n      username: new FormControl( this.user.user_name),\r\n      phone:    new FormControl( this.user.phone, [ Validators.required, Validators.pattern('[0-9]{10}')]),\r\n      role:     new FormControl( this.user.role.name ),\r\n      area:     new FormControl( this.user.area.name ),\r\n      status:   new FormControl( this.user.status ),\r\n      boss:     new FormControl( boss ),\r\n      file:     new FormControl(),\r\n      password: new FormControl(),\r\n    });\r\n\r\n    this.form.controls.email.disable({ onlySelf: true });\r\n    this.form.controls.username.disable({ onlySelf: true });\r\n    this.form.controls.role.disable({ onlySelf: true });\r\n    this.form.controls.area.disable({ onlySelf: true });\r\n    this.form.controls.status.disable({ onlySelf: true });\r\n    this.form.controls.boss.disable({ onlySelf: true });\r\n  }\r\n\r\n  save() {\r\n    if ( this.form.status === 'VALID' ) {\r\n      let data = new FormData();\r\n      data.append('name', this.form.controls.name.value );\r\n      data.append('lastname', this.form.controls.lastname.value );\r\n      data.append('gender', this.form.controls.gender.value );\r\n      data.append('phone', this.form.controls.phone.value );\r\n      data.append('active', this.form.controls.status.value );\r\n      data.append('password', this.form.controls.password.value || '' );\r\n      data.append('user', this.cLs.getIndex('id') );\r\n      if ( this.file ) {\r\n        data.append('image', this.file, 'image' );\r\n      }\r\n\r\n      this.cUserService.update( data, this.user._id )\r\n      .subscribe(\r\n        ( res: any ) => {\r\n          const employee: Employee = {\r\n            name: res.data.name,\r\n            last_name: res.data.last_name,\r\n            token: res.token,\r\n            id: res.data._id,\r\n            photo: res.data.photo,\r\n            role: res.data.role.name,\r\n            area: res.data.area.name,\r\n            normalizedToLink: res.data.normalizedToLink,\r\n            hierarchy: res.data.role.hierarchy\r\n          };\r\n\r\n          this.cLs.setData( employee );\r\n          this.router.navigateByUrl('/');\r\n        },\r\n        ( err: any ) => this.tostador.error( err.error, '¡Error!' )\r\n      ).add( () => {  } );\r\n    }\r\n  }\r\n\r\n\r\n  renderImage( file: any ) {\r\n    this.cIHandler.handler( file )\r\n    .then( (res) => {this.imgRender = res, this.file = file; }, (err) => console.log( err ) );\r\n  }\r\n\r\n  plusComments() {\r\n    this.indexComments = (this.indexComments + 1) > ( this.pagComments.length - 1 )\r\n    ? (this.pagComments.length - 1)\r\n    : this.indexComments + 1;\r\n  }\r\n\r\n  lessComments() {\r\n    this.indexComments = (this.indexComments - 1) < 0 ? 0 : this.indexComments - 1;\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\n\nimport { MeRoutingModule } from './me-routing.module';\nimport { MeComponent } from './me.component';\n\n\n@NgModule({\n  declarations: [MeComponent],\n  imports: [\n    CommonModule,\n    MeRoutingModule,\n    ReactiveFormsModule,\n    FormsModule\n  ]\n})\nexport class MeModule { }\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ImageHandlerService {\n\n  constructor() { }\n\n  handler( file: any,  inSize?: number, inWidth?: number, inHeight?: number ): Promise<any> {\n    if ( !file ) {\n      return new Promise( (res: any, rej: any) => rej( 'No se recibió la imágen' ) );\n    }\n\n    const imageType = /image.*/;\n    if ( !file.type.match( imageType) ) {\n      return new Promise( (res: any, rej: any) => rej( 'El archivo recibido no es una imagen' ) );\n    }\n\n    if ( inSize ) {\n      const KBIn   = Math.ceil( inSize );\n      const KBFile = Math.ceil( file.size / 1024 );\n      if ( KBIn < KBFile ) {\n        return new Promise( (res: any, rej: any) => rej( `Peso de fichero excedido. Permitido ${ KBIn }KB, enviado ${ KBFile }KB.` ) );\n      }\n    }\n\n    const reader: any = new FileReader();\n    const img: any    = new Image();\n\n    reader.readAsDataURL( file );\n\n    const imgPromise = new Promise( (resolve: any) => {\n      img.onload = () => {\n          resolve( { width: img.width, height: img.height } );\n      };\n    });\n\n    const onloadPromise = new Promise( (resolve: any) => {\n      reader.onload = () => {\n        if ( inHeight && inWidth ) {\n\n          img.src = reader.result;\n          imgPromise.then( (res: any) => {\n            if ( res.width > inWidth || res.height > inHeight ) {\n              resolve( `Archivo sobredimensionado. Actual: ${ res.width }x${res.height}. Permitido: ${inWidth}x${inHeight}` );\n            } else {\n              resolve(reader.result);\n            }\n          });\n\n        } else {\n          resolve(reader.result);\n        }\n      };\n    });\n\n    return onloadPromise;\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { link } from '../variables/services.config';\nimport { Observable } from 'rxjs';\nimport { LocalStorageService } from './local-storage.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UsersService {\n\n  constructor(\n    private cHttp: HttpClient,\n    private cUser: LocalStorageService\n  ) { }\n\n  public save( data: any ): Observable<any> {\n    return this.cHttp.put( `${ link }/users`, data );\n  }\n\n  public update( data: any, id: string ): Observable<any> {\n    return this.cHttp.post( `${ link }/users/${ id }`, data );\n  }\n\n  public fetch( skip: number, limit: number, user?: string ): Observable<any> {\n    user = user ? user : '';\n    return this.cHttp.get( `${ link }/users/${ skip }/${ limit }/${ user }` );\n  }\n\n  public resetPassword( id: string ): Observable<any> {\n    return this.cHttp.post( `${ link }/password/${ id }`, { user: this.cUser.getIndex( 'id' ) } );\n  }\n\n  public getBosses( role: number, dpto: string ): Observable<any> {\n    return this.cHttp.get( `${ link }/boss/${ role }/${ dpto }` );\n  }\n\n  public catalog(): Observable<any> {\n    return this.cHttp.get( `${ link }/user-catalog` );\n  }\n}\n"],"sourceRoot":""}